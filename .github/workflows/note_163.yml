name: 有道云笔记签到

on:
  workflow_dispatch:
#   watch:
#     types: [started]
  schedule:
    - cron:  '0 1 * * *'
    
jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@main
    - name: Wait
      run: |
        random_time=1
        echo "等待 ${random_time} 分钟后开始执行"
        for((i=1;i<=${random_time};i++));  
        do
        echo "倒计时:剩余 $[${random_time}-$i] 分钟"
        sleep 1m
        done
    - name: Setup .NET Core
      uses: actions/setup-dotnet@main
      with:
        dotnet-version: '3.1.x' # SDK Version to use; x will use the latest version of the 3.1 channel
    - name: Run
      run: |
        cd Note163Checkin
        dotnet run
      env: 
        CONF: ${{ secrets.NOTE_163_CONF }}
